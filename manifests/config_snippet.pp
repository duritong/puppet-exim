define exim::config_snippet($content = 'absent'){
  $group = $::operatingsystem ? {
    'debian' => 'Debian-exim',
    default => 'exim'
  }

  file{"/etc/exim/conf.d/${name}":
    require => Package['exim'],
    notify => Service['exim'],
    owner => root, group => $group, mode => 0640;
  }
  if ($content=='absent'){
    File["/etc/exim/conf.d/${name}"]{
      source => [ "puppet:///modules/site_exim/conf.d/${::fqdn}/${name}",
                "puppet:///modules/site_exim/conf.d/${exim::component_type}/${name}",
                "puppet:///modules/site_exim/conf.d/${exim::component_cluster}/${name}",
                "puppet:///modules/site_exim/conf.d/${name}" ],
    }
  } else {
    File["/etc/exim/conf.d/${name}"]{
      content => $content,
    }
  }
  case $::operatingsystem {
    'debian': {
      File["/etc/exim/conf.d/${name}"]{
        path => "/etc/exim4/conf.d/${name}"
      }
    }
  }
}
